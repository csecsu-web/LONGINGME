<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longingme — You can put it down here.</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,300;0,400;1,300;1,400&family=DM+Sans:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<a href="#main-content" class="skip-link">Skip to main content</a>
<!-- Crisis bar -->
<div class="crisis-bar">
    <span>Need urgent help?</span>
    <a href="tel:988">988</a>·
    <a href="sms:741741">Text HOME → 741741</a>·
    <a href="https://findahelpline.com" target="_blank" rel="noopener">International</a>
</div>

<!-- ── LOADING ─────────────────────────────────────────────────── -->
<div id="loading" class="screen active">
    <div class="loading-inner">
        <p class="loading-word">longingme</p>
        <p class="loading-sub">finding a quiet place...</p>
    </div>
</div>

<!-- ── LANDING ────────────────────────────────────────────────── -->
<div id="landing" class="screen">
    <div class="landing-wrap" id="main-content">
        <p class="landing-eyebrow">a private space for what's hard to say</p>
        <h1 class="landing-title">You can put it<br><em>down here.</em></h1>
        <p class="landing-sub">No fixing. No labels. No judgment.<br>Just you, and what you're carrying.</p>

        <p class="landing-section-label">What do you need right now?</p>
        <div class="landing-section-label" aria-hidden="true"></div>
        <div class="landing-actions">
            <button class="action-card" data-page="write-page">
                <span class="action-icon">○</span>
                <span class="action-title">Release something</span>
                <span class="action-desc">Write what you can't say out loud</span>
            </button>
            <button class="action-card" data-page="paths-page">
                <span class="action-icon">○</span>
                <span class="action-title">Explore yourself</span>
                <span class="action-desc">Guided paths for understanding yourself</span>
            </button>
            <button class="action-card" data-page="read-page">
                <span class="action-icon">○</span>
                <span class="action-title">Know I'm not alone</span>
                <span class="action-desc">Read what others have shared</span>
            </button>
            <button class="action-card" data-page="ground-page">
                <span class="action-icon">○</span>
                <span class="action-title">Just breathe</span>
                <span class="action-desc">A quiet moment to come back to yourself</span>
            </button>
        </div>

        <button class="landing-skip" data-page="write-page">I just need to write →</button>

        <div class="landing-footer">
            <button class="footer-link" data-page="about-page">About</button>
            <span>·</span>
            <button class="footer-link" data-page="my-page">My entries</button>
        </div>
    </div>
</div>

<!-- ── WRITE PAGE ─────────────────────────────────────────────── -->
<div id="write-page" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="landing">← Longingme</button>
        <div class="nav-links">
            <button class="nav-link" data-page="read-page">Read</button>
            <button class="nav-link" data-page="my-page">Mine</button>
            <button class="nav-link glow-link" data-page="ground-page">Breathe</button>
        </div>
    </nav>

    <div class="write-wrap">
        <div class="companion-greeting" id="companion-greeting">
            <span class="companion-dot"></span>
            <p id="companion-text">I'm here with you.</p>
        </div>

        <!-- Emotion tags -->
        <div class="field-group">
            <label class="field-label">What does this feel like?</label>
            <div class="tag-cloud">
                <button class="etag active" data-tag="">none</button>
                <button class="etag" data-tag="anxiety">Anxiety</button>
                <button class="etag" data-tag="depression">Depression</button>
                <button class="etag" data-tag="grief">Grief</button>
                <button class="etag" data-tag="addiction">Addiction</button>
                <button class="etag" data-tag="identity">Identity</button>
                <button class="etag" data-tag="self-image">Self-image</button>
                <button class="etag" data-tag="loneliness">Loneliness</button>
                <button class="etag" data-tag="trauma">Trauma</button>
                <button class="etag" data-tag="anger">Anger</button>
                <button class="etag" data-tag="numbness">Numbness</button>
                <button class="etag" data-tag="burnout">Burnout</button>
                <button class="etag" data-tag="fear">Fear</button>
                <button class="etag" data-tag="shame">Shame</button>
                <button class="etag" data-tag="loss">Loss</button>
                <button class="etag" data-tag="relationships">Relationships</button>
                <button class="etag" data-tag="self-harm">Self-harm</button>
                <button class="etag" data-tag="eating">Eating</button>
                <button class="etag" data-tag="sleep">Sleep</button>
                <button class="etag" data-tag="dissociation">Dissociation</button>
                <button class="etag" data-tag="ocd">OCD</button>
                <button class="etag" data-tag="ptsd">PTSD</button>
                <button class="etag" data-tag="bipolar">Bipolar</button>
                <button class="etag" data-tag="worthlessness">Worthlessness</button>
                <button class="etag" data-tag="isolation">Isolation</button>
                <button class="etag" data-tag="confusion">Confusion</button>
                <button class="etag" data-tag="emptiness">Emptiness</button>
                <button class="etag" data-tag="control">Control</button>
                <button class="etag" data-tag="self-worth">Self-worth</button>
            </div>
        </div>

        <!-- Textarea -->
        <div class="textarea-wrap">
            <textarea id="entry-input" class="entry-textarea" placeholder="Write whatever you need to. Nothing will judge you here." maxlength="1000"></textarea>
            <button class="pause-inline-btn" id="pause-btn">pause · breathe</button>
        </div>
        <div class="write-meta">
            <span id="write-char-count" class="char-count">0 / 1000</span>
            <div class="write-actions">
                <button id="save-private-btn" class="btn-ghost" disabled>Save privately</button>
                <button id="share-anon-btn" class="btn-primary" disabled>Share anonymously</button>
            </div>
        </div>

        <!-- Companion response after submit -->
        <div id="companion-response" class="companion-response hidden">
            <div class="companion-bubble">
                <span class="companion-dot"></span>
                <p id="companion-response-text"></p>
            </div>
            <p class="confirm-affirmation" id="confirm-affirmation"></p>
            <div class="post-submit-actions">
                <button id="reflect-btn" class="btn-ghost-sm">Reflect on this</button>
                <button id="write-again-btn" class="btn-ghost-sm">Write again</button>
            </div>
        </div>

        <!-- Reflection questions -->
        <div id="reflect-section" class="reflect-section hidden">
            <p class="reflect-label">Gentle questions, if you'd like:</p>
            <div id="reflect-questions" class="reflect-questions"></div>
            <button id="reflect-close" class="text-link">Close</button>
        </div>

        <!-- Private saved -->
        <div class="private-saved-section" id="private-saved-section">
            <p class="section-label">Saved privately</p>
            <div id="private-entries-list"></div>
        </div>
    </div>
</div>

<!-- ── GUIDED PATHS ────────────────────────────────────────────── -->
<div id="paths-page" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="landing">← Longingme</button>
    </nav>
    <div class="page-container">
        <p class="page-title">Guided Paths</p>
        <p class="page-sub">Optional tracks to understand yourself better. No deadlines. No pressure. Start and stop whenever you need.</p>
        </div>

        <div class="paths-grid">
            <button class="path-card" data-path="anxiety">
                <span class="path-icon">◌</span>
                <span class="path-name">Understanding My Anxiety</span>
                <span class="path-desc">4 weeks of gentle exploration</span>
            </button>
            <button class="path-card" data-path="control">
                <span class="path-icon">◌</span>
                <span class="path-name">Breaking Control Patterns</span>
                <span class="path-desc">Understand where control comes from</span>
            </button>
            <button class="path-card" data-path="selfworth">
                <span class="path-icon">◌</span>
                <span class="path-name">Self-Worth</span>
                <span class="path-desc">Coming back to yourself</span>
            </button>
            <button class="path-card" data-path="emotions">
                <span class="path-icon">◌</span>
                <span class="path-name">Emotional Regulation</span>
                <span class="path-desc">Making sense of what you feel</span>
            </button>
            <button class="path-card" data-path="addiction">
                <span class="path-icon">◌</span>
                <span class="path-name">Addiction & Urges</span>
                <span class="path-desc">Understanding the pull, without shame</span>
            </button>
            <button class="path-card" data-path="identity">
                <span class="path-icon">◌</span>
                <span class="path-name">Identity & Self-Discovery</span>
                <span class="path-desc">Who you are when no one is watching</span>
            </button>
        </div>
    </div>
</div>

<!-- ── PATH DETAIL ─────────────────────────────────────────────── -->
<div id="path-detail" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="paths-page">← Paths</button>
    </nav>
    <div class="page-container">
        <p class="path-detail-name" id="path-detail-name"></p>
        <p class="path-detail-sub" id="path-detail-sub"></p>
        <div class="path-weeks" id="path-weeks"></div>
    </div>
</div>

<!-- ── READ PAGE ──────────────────────────────────────────────── -->
<div id="read-page" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="landing">← Longingme</button>
        <div class="nav-links">
            <button class="nav-link" data-page="write-page">Write</button>
        </div>
    </nav>
    <div class="page-container">
        <div class="page-header">
            <p class="page-title">Things others have needed to say.</p>
            <p class="page-sub">You are not the only one carrying something heavy.</p>
        </div>
        <div class="filter-row">
            <button class="filter-btn active" data-filter="">All</button>
            <button class="filter-btn" data-filter="anxiety">Anxiety</button>
            <button class="filter-btn" data-filter="depression">Depression</button>
            <button class="filter-btn" data-filter="grief">Grief</button>
            <button class="filter-btn" data-filter="loneliness">Loneliness</button>
            <button class="filter-btn" data-filter="trauma">Trauma</button>
            <button class="filter-btn" data-filter="anger">Anger</button>
            <button class="filter-btn" data-filter="numbness">Numbness</button>
            <button class="filter-btn" data-filter="shame">Shame</button>
            <button class="filter-btn" data-filter="fear">Fear</button>
            <button class="filter-btn" data-filter="burnout">Burnout</button>
            <button class="filter-btn" data-filter="loss">Loss</button>
            <button class="filter-btn" data-filter="addiction">Addiction</button>
            <button class="filter-btn" data-filter="identity">Identity</button>
            <button class="filter-btn" data-filter="emptiness">Emptiness</button>
            <button class="filter-btn" data-filter="worthlessness">Worthlessness</button>
        </div>
        <div id="shared-wall" class="shared-wall"><p class="loading-note">loading...</p></div>
        <button id="wall-load-more" class="btn-ghost load-more-btn" style="display:none">See more</button>
    </div>
</div>

<!-- ── MY PAGE ────────────────────────────────────────────────── -->
<div id="my-page" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="landing">← Longingme</button>
    </nav>
    <div class="page-container">
        <div class="page-header">
            <p class="page-title">What you have shared.</p>
            <p class="page-sub">Only visible in this browser. No one else can see these are yours.</p>
        </div>

        <!-- Pattern reflection -->
        <div id="pattern-section" class="pattern-section hidden">
            <p class="pattern-label">Pattern reflection</p>
            <div id="pattern-text" class="pattern-text"></div>
        </div>

        <div id="my-submissions-list" class="shared-wall"><p class="loading-note">loading...</p></div>
        <button id="my-load-more" class="btn-ghost load-more-btn" style="display:none">See more</button>
    </div>
</div>

<!-- ── GROUNDING ──────────────────────────────────────────────── -->
<div id="ground-page" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="landing">← Longingme</button>
    </nav>
    <div class="ground-wrap">
        <p class="ground-message-text" id="ground-message-text"></p>

        <div class="breath-area">
            <div class="breath-ring" id="breath-ring"></div>
            <div class="breath-info">
                <p class="breath-phase" id="breath-phase">·</p>
                <p class="breath-num" id="breath-num"></p>
            </div>
        </div>
        <button class="breath-toggle" id="breath-toggle">Begin</button>

        <div class="ground-divider"></div>
        <div class="ground-54321">
            <p class="ground-54321-title">5 · 4 · 3 · 2 · 1 Grounding</p>
            <div class="steps-list">
                <div class="step-row"><span class="step-n">5</span><span>things you can <em>see</em></span></div>
                <div class="step-row"><span class="step-n">4</span><span>things you can <em>touch</em></span></div>
                <div class="step-row"><span class="step-n">3</span><span>things you can <em>hear</em></span></div>
                <div class="step-row"><span class="step-n">2</span><span>things you can <em>smell</em></span></div>
                <div class="step-row"><span class="step-n">1</span><span>thing you can <em>taste</em></span></div>
            </div>
        </div>
    </div>
</div>

<!-- ── ABOUT ──────────────────────────────────────────────────── -->
<div id="about-page" class="screen">
    <nav class="nav">
        <button class="nav-back" data-page="landing">← Longingme</button>
    </nav>
    <div class="page-container narrow">
        <p class="page-title">What this is</p>
        <p>Longingme exists for people who are struggling but not ready for therapy, diagnosis, or labels. It is a space for the in-between — where something is wrong but words for it are still forming.</p>
        <p>It is not here to fix you. It is here to hold what you bring to it.</p>

        <p class="section-label" style="margin-top:2rem">Privacy</p>
        <p>No accounts. No emails. No tracking. Private entries never leave your browser. Shared entries are anonymous text only.</p>
        <p>We do not sell data. We do not run ads. We do not share anything.</p>

        <p class="section-label" style="margin-top:2rem">Safety</p>
        <p>Content that instructs or encourages self-harm is filtered automatically. You can express pain here. You cannot instruct others to hurt themselves.</p>

        <p class="section-label" style="margin-top:2rem">If you need help now</p>
        <div class="about-crisis">
            <p><strong>988</strong> — Suicide & Crisis Lifeline (US)</p>
            <p><strong>741741</strong> — Crisis Text Line (text HOME)</p>
            <p><a href="https://findahelpline.com" target="_blank" rel="noopener">findahelpline.com</a> — International</p>
        </div>
        <p class="about-footer">Free forever. You are not broken.</p>
    </div>
</div>

<!-- Pause modal -->
<div id="pause-modal" class="pause-modal hidden">
    <div class="pause-inner">
        <p class="pause-word">breathe</p>
        <div class="pause-ring" id="pause-ring"></div>
        <p class="pause-label" id="pause-label">in</p>
        <button class="btn-ghost" id="pause-close">Return to writing</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>
</body>
</html>
